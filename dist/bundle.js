(()=>{"use strict";class e{constructor(e,t,d="New To Do",n=new Date(1/1970),l,a=""){this.title=d,this.dueDate=n,this.priorty=l,this.notes=a,this.id=t,this.projectId=e}}function t(e){let t=e.title,d=e.dueDate,n=document.createElement("div");n.classList.add("to-do-item"),n.dataset.id=e.id,n.dataset.projectid=e.projectId;let l=document.createElement("div");l.classList.add("to-do-check");let a=document.createElement("img");a.src="./checkbox-blank.svg",a.alt="checkbox-unchecked",l.appendChild(a);let i=document.createElement("div");i.classList.add("to-do-title"),i.textContent=t;let o=document.createElement("div");o.classList.add("to-do-details"),o.textContent="Details";let c=document.createElement("div");c.classList.add("to-do-date"),c.textContent=d.toLocaleDateString();let s=document.createElement("div");s.classList.add("to-do-edit");let r=document.createElement("img");r.src="./edit.svg",r.alt="edit",s.appendChild(r);let p=document.createElement("div");p.classList.add("to-do-delete");let m=document.createElement("img");return m.src="./delete.svg",m.alt="delete",p.addEventListener("click",(function(e){let t=e.target.parentElement.parentElement;console.log(t.dataset),this.dispatchEvent(new CustomEvent("deleteItem",{bubbles:!0,detail:{item_id:t.dataset.id,project_id:t.dataset.projectid}})),t.parentElement.removeChild(t)})),p.appendChild(m),n.appendChild(l),n.appendChild(i),n.appendChild(o),n.appendChild(c),n.appendChild(s),n.appendChild(p),n}class d{constructor(e,t="New Project",d=[]){this.projectid=e,this.title=t,this.toDoList=d}addToProject(e){this.toDoList.push(e)}}let n=[];const l=document.querySelector(".project-content"),a=(document.querySelector(".sidebar-content"),document.querySelector(".projectview")),i=function(){let e=document.createElement("div");e.classList.add("modal");let t=document.createElement("div");t.classList.add("modal-content");let d=document.createElement("form"),n=document.createElement("div");n.classList.add("menu-item");let l=document.createElement("label");l.classList.add("input-label"),l.htmlFor="new_project_name",l.textContent="Project Name";let a=document.createElement("input");a.classList.add("modal-title-input"),a.id="todo-input-title",a.type="text",a.name="new_project_name",a.required=!0,n.appendChild(l),n.appendChild(a),t.appendChild(n);let i=document.createElement("div");i.classList.add("new-project-button");let o=document.createElement("button");o.classList.add("button-create"),o.textContent="Create",o.type="submit",d.action="",d.method="GET",d.addEventListener("submit",(function(t){t.preventDefault(),this.dispatchEvent(new CustomEvent("projectCreate",{bubbles:!0,detail:{project_name:a.value}})),e.style.display="none"}));let c=document.createElement("div");return c.classList.add("button-cancel"),c.textContent="Cancel",c.addEventListener("click",(t=>{e.style.display="none"})),i.appendChild(o),i.appendChild(c),t.appendChild(i),d.appendChild(t),e.appendChild(d),e}(),o=function(){let e=document.createElement("div");e.classList.add("modal");let t=document.createElement("form"),d=document.createElement("div");d.classList.add("modal-content");let n=document.createElement("div");n.classList.add("menu-item");let l=document.createElement("label");l.classList.add("input-label"),l.htmlFor="new_todo_name",l.textContent="To Do";let a=document.createElement("input");a.classList.add("modal-title-input"),a.id="todo-input-title",a.type="text",a.name="new_todo_name",a.required=!0,n.appendChild(l),n.appendChild(a),d.appendChild(n);let i=document.createElement("div");i.classList.add("menu-item");let o=document.createElement("label");o.classList.add("input-label"),o.htmlFor="new_todo_date",o.textContent="Date";let c=document.createElement("input");c.id="todo-input-date",c.type="date",c.name="new_todo_date",i.appendChild(o),i.appendChild(c),d.appendChild(i);let s=document.createElement("div");s.classList.add("menu-item");let r=document.createElement("label");r.classList.add("input-label"),r.htmlFor="new_todo_note",r.textContent="Note";let p=document.createElement("textarea");p.id="todo-input-note",p.name="new_todo_note",p.rows="4",p.cols="50",s.appendChild(r),s.appendChild(p),d.appendChild(s);let m=document.createElement("div");m.classList.add("new-project-button");let u=document.createElement("button");u.classList.add("button-create"),u.textContent="Create",u.type="submit",t.action="",t.method="GET",t.addEventListener("submit",(function(d){d.preventDefault(),this.dispatchEvent(new CustomEvent("todoCreate",{bubbles:!0,detail:{todo_name:a.value,date:c.value,note:p.value}})),e.style.display="none",t.reset()}));let h=document.createElement("div");return h.classList.add("button-cancel"),h.textContent="Cancel",h.addEventListener("click",(t=>{e.style.display="none"})),m.appendChild(u),m.appendChild(h),d.appendChild(m),t.appendChild(d),e.appendChild(t),e}(),c=document.querySelector(".projects"),s=document.querySelector(".project-add-button"),r=document.querySelector("#all"),p=a.querySelector("h1");let m=r;function u(e){a.removeChild(document.querySelector(".modal")),a.appendChild(e),"none"!==e.style.display&&""!==e.style.display||(e.style.display="flex")}function h(){C(),n.forEach((e=>{""!=e&&e.toDoList.forEach((e=>{l.appendChild(t(e))}))}))}function C(){for(;l.firstChild;)l.removeChild(l.firstChild)}function E(e){var d;m.classList.remove("selected"),m=e,e.classList.add("selected"),p.textContent=n[m.dataset.id].title,d=n[m.dataset.id],C(),d.toDoList.forEach((e=>{l.appendChild(t(e))}))}r.addEventListener("click",(function(e){m.classList.remove("selected"),m=this,this.classList.add("selected"),p.textContent="ALL",h()})),n.push(new d(0,"ALL")),m.dataset.id=0,m.classList.add("selected"),p.textContent="ALL",h(),i.addEventListener("projectCreate",(e=>{let t=e.detail.project_name,l=new d(n.length,t);n.push(l),function(e){let t=function(e){let t=document.createElement("div");t.classList.add("project-item"),t.dataset.id=e.projectid;let d=document.createElement("div");d.textContent=e.title;let n=document.createElement("img");return n.src="./delete.svg",n.alt="delete-project",n.addEventListener("click",(function(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("deleteProject",{bubbles:!0,detail:{project_id:t.dataset.id}}))})),t.appendChild(d),t.appendChild(n),t}(e);t.addEventListener("click",(function(e){E(this)})),t.addEventListener("deleteProject",(function(e){e.stopPropagation();let t=e.target.parentElement.previousSibling;n[e.detail.project_id]="",null===t||m===r?(t=r,h(),t.classList.add("selected"),m=r,p.textContent="ALL"):E(t),e.target.parentElement.parentElement.removeChild(e.target.parentElement)})),c.appendChild(t)}(l)})),o.addEventListener("todoCreate",(d=>{let l=d.detail,i=m.dataset.id,o=new e(i,n[i].toDoList.length,l.todo_name,new Date(1/1970),1,l.note);n[i].toDoList.push(o),a.querySelector(".project-content").appendChild(t(o))})),s.addEventListener("click",(e=>{u(i)})),document.querySelector(".new-todo-button").addEventListener("click",(e=>{u(o)})),l.addEventListener("deleteItem",(e=>{let t=e.detail.item_id,d=e.detail.project_id;n[d].toDoList.splice(t,1)}))})();