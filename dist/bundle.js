(()=>{"use strict";class e{constructor(e,t,d="New To Do",n=new Date(1/1970),a,l=""){this.title=d,this.dueDate=n,this.priorty=a,this.notes=l,this.id=t,this.projectId=e}}function t(e){let t=e.title,d=e.dueDate,n=document.createElement("div");n.classList.add("to-do-item"),n.dataset.id=e.id,n.dataset.projectid=e.projectId;let a=document.createElement("div");a.classList.add("to-do-check");let l=document.createElement("img");l.src="./checkbox-blank.svg",l.alt="checkbox-unchecked",a.appendChild(l);let i=document.createElement("div");i.classList.add("to-do-title"),i.textContent=t;let o=document.createElement("div");o.classList.add("to-do-details"),o.textContent="Details",o.addEventListener("click",(function(e){this.dispatchEvent(new CustomEvent("detailItem",{bubbles:!0,detail:{item_id:n.dataset.id,project_id:n.dataset.projectid}}))}));let c=document.createElement("div");c.classList.add("to-do-date"),c.textContent=d.toLocaleDateString("en-UK");let s=document.createElement("div");s.classList.add("to-do-edit"),s.addEventListener("click",(function(e){this.dispatchEvent(new CustomEvent("editItem",{bubbles:!0,detail:{item_id:n.dataset.id,project_id:n.dataset.projectid}}))}));let m=document.createElement("img");m.src="./edit.svg",m.alt="edit",s.appendChild(m);let r=document.createElement("div");r.classList.add("to-do-delete");let p=document.createElement("img");return p.src="./delete.svg",p.alt="delete",r.addEventListener("click",(function(e){let t=e.target.parentElement.parentElement;console.log(t.dataset),this.dispatchEvent(new CustomEvent("deleteItem",{bubbles:!0,detail:{item_id:t.dataset.id,project_id:t.dataset.projectid}})),t.parentElement.removeChild(t)})),r.appendChild(p),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(c),n.appendChild(s),n.appendChild(r),n}class d{constructor(e,t="New Project",d=[]){this.projectid=e,this.title=t,this.toDoList=d}addToProject(e){this.toDoList.push(e)}}let n=[];const a=document.querySelector(".project-content"),l=(document.querySelector(".sidebar-content"),document.querySelector(".projectview")),i=function(){let e=document.createElement("div");e.classList.add("modal");let t=document.createElement("div");t.classList.add("modal-content");let d=document.createElement("form"),n=document.createElement("div");n.classList.add("menu-item");let a=document.createElement("label");a.classList.add("input-label"),a.htmlFor="new_project_name",a.textContent="Project Name";let l=document.createElement("input");l.classList.add("modal-title-input"),l.id="todo-input-title",l.type="text",l.name="new_project_name",l.required=!0,n.appendChild(a),n.appendChild(l),t.appendChild(n);let i=document.createElement("div");i.classList.add("new-project-button");let o=document.createElement("button");o.classList.add("button-create"),o.textContent="Create",o.type="submit",d.action="",d.method="GET",d.addEventListener("submit",(function(t){t.preventDefault(),this.dispatchEvent(new CustomEvent("projectCreate",{bubbles:!0,detail:{project_name:l.value}})),e.style.display="none"}));let c=document.createElement("div");return c.classList.add("button-cancel"),c.textContent="Cancel",c.addEventListener("click",(t=>{e.style.display="none"})),i.appendChild(o),i.appendChild(c),t.appendChild(i),d.appendChild(t),e.appendChild(d),e}(),o=function(){let e=document.createElement("div");e.classList.add("modal");let t=document.createElement("form"),d=document.createElement("div");d.classList.add("modal-content");let n=document.createElement("div");n.classList.add("menu-item");let a=document.createElement("label");a.classList.add("input-label"),a.htmlFor="new_todo_name",a.textContent="To Do";let l=document.createElement("input");l.classList.add("modal-title-input"),l.id="todo-input-title",l.type="text",l.name="new_todo_name",l.required=!0,n.appendChild(a),n.appendChild(l),d.appendChild(n);let i=document.createElement("div");i.classList.add("menu-item");let o=document.createElement("label");o.classList.add("input-label"),o.htmlFor="new_todo_date",o.textContent="Date";let c=document.createElement("input");c.id="todo-input-date",c.type="date",c.name="new_todo_date",c.required=!0,c.valueAsDate=new Date,i.appendChild(o),i.appendChild(c),d.appendChild(i);let s=document.createElement("div");s.classList.add("menu-item");let m=document.createElement("label");m.classList.add("input-label"),m.htmlFor="new_todo_note",m.textContent="Note";let r=document.createElement("textarea");r.id="todo-input-note",r.name="new_todo_note",r.rows="4",r.cols="50",s.appendChild(m),s.appendChild(r),d.appendChild(s);let p=document.createElement("div");p.classList.add("new-project-button");let u=document.createElement("button");u.classList.add("button-create"),u.textContent="Create",u.type="submit",t.action="",t.method="GET",t.addEventListener("submit",(function(d){d.preventDefault(),this.dispatchEvent(new CustomEvent("todoCreate",{bubbles:!0,detail:{todo_name:l.value,date:c.valueAsDate,note:r.value}})),e.style.display="none",t.reset(),c.valueAsDate=new Date}));let h=document.createElement("div");return h.classList.add("button-cancel"),h.textContent="Cancel",h.addEventListener("click",(t=>{e.style.display="none"})),p.appendChild(u),p.appendChild(h),d.appendChild(p),t.appendChild(d),e.appendChild(t),e}(),c=document.querySelector(".projects"),s=document.querySelector(".project-add-button"),m=document.querySelector("#all"),r=l.querySelector("h1");let p=m;function u(e){l.removeChild(document.querySelector(".modal")),l.appendChild(e),"none"!==e.style.display&&""!==e.style.display||(e.style.display="flex")}function h(){E(),n.forEach((e=>{""!=e&&e.toDoList.forEach((e=>{a.appendChild(t(e))}))}))}function E(){for(;a.firstChild;)a.removeChild(a.firstChild)}function C(e){var d;p.classList.remove("selected"),p=e,e.classList.add("selected"),r.textContent=n[p.dataset.id].title,d=n[p.dataset.id],E(),d.toDoList.forEach((e=>{a.appendChild(t(e))}))}m.addEventListener("click",(function(e){p.classList.remove("selected"),p=this,this.classList.add("selected"),r.textContent="ALL",h()})),n.push(new d(0,"ALL")),p.dataset.id=0,p.classList.add("selected"),r.textContent="ALL",h(),i.addEventListener("projectCreate",(e=>{let t=e.detail.project_name,a=new d(n.length,t);n.push(a),function(e){let t=function(e){let t=document.createElement("div");t.classList.add("project-item"),t.dataset.id=e.projectid;let d=document.createElement("div");d.textContent=e.title;let n=document.createElement("img");return n.src="./delete.svg",n.alt="delete-project",n.addEventListener("click",(function(e){e.stopPropagation(),this.dispatchEvent(new CustomEvent("deleteProject",{bubbles:!0,detail:{project_id:t.dataset.id}}))})),t.appendChild(d),t.appendChild(n),t}(e);t.addEventListener("click",(function(e){C(this)})),t.addEventListener("deleteProject",(function(e){e.stopPropagation();let t=e.target.parentElement.previousSibling;n[e.detail.project_id]="",null===t||p===m?(t=m,h(),t.classList.add("selected"),p=m,r.textContent="ALL"):C(t),e.target.parentElement.parentElement.removeChild(e.target.parentElement)})),c.appendChild(t)}(a)})),o.addEventListener("todoCreate",(d=>{let a=d.detail,i=p.dataset.id,o=new e(i,n[i].toDoList.length,a.todo_name,a.date,1,a.note);n[i].toDoList.push(o),l.querySelector(".project-content").appendChild(t(o))})),s.addEventListener("click",(e=>{u(i)})),document.querySelector(".new-todo-button").addEventListener("click",(e=>{u(o)})),a.addEventListener("deleteItem",(e=>{let t=e.detail.item_id,d=e.detail.project_id;n[d].toDoList.splice(t,1)})),a.addEventListener("detailItem",(e=>{console.log("SHOW");let t=e.detail.item_id,d=e.detail.project_id;u(function(e){let t=document.createElement("div");t.classList.add("modal");let d=document.createElement("form"),n=document.createElement("div");n.classList.add("modal-content");let a=document.createElement("div");a.classList.add("menu-item");let l=document.createElement("label");l.classList.add("input-label"),l.htmlFor="new_todo_name",l.textContent=e.title,a.appendChild(l),n.appendChild(a);let i=document.createElement("div");i.classList.add("menu-item");let o=document.createElement("label");o.classList.add("input-label"),o.htmlFor="new_todo_date",o.textContent="Date";let c=document.createElement("div");c.id="todo-input-date",c.name="new_todo_date",c.textContent=e.dueDate.toLocaleDateString("en-UK"),i.appendChild(o),i.appendChild(c),n.appendChild(i);let s=document.createElement("div");s.classList.add("menu-item");let m=document.createElement("label");m.classList.add("input-label"),m.htmlFor="new_todo_note",m.textContent="Note";let r=document.createElement("div");r.id="todo-input-note",r.name="new_todo_note",r.textContent=e.notes,s.appendChild(m),s.appendChild(r),n.appendChild(s);let p=document.createElement("div");p.classList.add("new-project-button"),d.action="",d.method="GET";let u=document.createElement("div");return u.classList.add("button-cancel"),u.textContent="Cancel",u.addEventListener("click",(e=>{t.style.display="none"})),p.appendChild(u),n.appendChild(p),d.appendChild(n),t.appendChild(d),t}(n[d].toDoList[t]))})),a.addEventListener("editItem",(e=>{console.log("EDIT");let d=e.detail.item_id,l=e.detail.project_id;console.log(d),console.log(l);let i=function(e){let t=document.createElement("div");t.classList.add("modal");let d=document.createElement("form"),n=document.createElement("div");n.classList.add("modal-content");let a=document.createElement("div");a.classList.add("menu-item");let l=document.createElement("label");l.classList.add("input-label"),l.htmlFor="new_todo_name",l.textContent="To Do";let i=document.createElement("input");i.classList.add("modal-title-input"),i.id="todo-input-title",i.type="text",i.name="new_todo_name",i.required=!0,i.value=e.title,a.appendChild(l),a.appendChild(i),n.appendChild(a);let o=document.createElement("div");o.classList.add("menu-item");let c=document.createElement("label");c.classList.add("input-label"),c.htmlFor="new_todo_date",c.textContent="Date";let s=document.createElement("input");s.id="todo-input-date",s.type="date",s.name="new_todo_date",s.required=!0,s.valueAsDate=e.dueDate,o.appendChild(c),o.appendChild(s),n.appendChild(o);let m=document.createElement("div");m.classList.add("menu-item");let r=document.createElement("label");r.classList.add("input-label"),r.htmlFor="new_todo_note",r.textContent="Note";let p=document.createElement("textarea");p.id="todo-input-note",p.name="new_todo_note",p.rows="4",p.cols="50",p.textContent=e.notes,m.appendChild(r),m.appendChild(p),n.appendChild(m);let u=document.createElement("div");u.classList.add("new-project-button");let h=document.createElement("button");h.classList.add("button-create"),h.textContent="Edit",h.type="submit",d.action="",d.method="GET",d.addEventListener("submit",(function(n){n.preventDefault(),this.dispatchEvent(new CustomEvent("todoEdit",{bubbles:!0,detail:{item_id:e.id,project_id:e.projectId,todo_name:i.value,date:s.valueAsDate,note:p.value}})),t.style.display="none",d.reset()}));let E=document.createElement("div");return E.classList.add("button-cancel"),E.textContent="Cancel",E.addEventListener("click",(e=>{t.style.display="none"})),u.appendChild(h),u.appendChild(E),n.appendChild(u),d.appendChild(n),t.appendChild(d),t}(n[l].toDoList[d]);i.addEventListener("todoEdit",(function(e){let d=e.detail.item_id,l=e.detail.project_id;n[l].toDoList[d].title=e.detail.todo_name,n[l].toDoList[d].dueDate=e.detail.date,n[l].toDoList[d].notes=e.detail.note;let i=a.querySelector(`[data-id="${d}"][data-projectid="${l}"]`);a.replaceChild(t(n[l].toDoList[d]),i)})),u(i),console.log(n[l].toDoList[d])}))})();